{"openapi":"3.0.0","paths":{"/connection":{"post":{"operationId":"ConnectionController_create","summary":"Establish a new connection to either a source or target","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}},"responses":{"200":{"description":"New connection has been added","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}}}},"get":{"operationId":"ConnectionController_getConnections","summary":"Fetch the currently active connections","parameters":[],"responses":{"200":{"description":"The list of connections","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}}}}}},"/connection/{connectionID}":{"get":{"operationId":"ConnectionController_getConnection","summary":"Retrieve connection parameters","parameters":[{"name":"connectionID","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Parameters of the connection","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}},"404":{"description":"No connection located"}}}},"/connection/delete":{"delete":{"operationId":"ConnectionController_deleteConnection","summary":"Remove a connection using its ID","parameters":[{"name":"connectionID","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"The connection has been deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}},"404":{"description":"No connection located"}}}},"/config":{"post":{"operationId":"ConfigController_setConfig","summary":"Update current configuration options","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfigDTO"}}}},"responses":{"200":{"description":"Resulting configuration","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfigResponseDTO"}}}}}},"get":{"operationId":"ConfigController_getConfig","summary":"Retrieve current configuration","parameters":[],"responses":{"200":{"description":"The current configuration","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfigDTO"}}}}}}},"/config/{name}":{"get":{"operationId":"ConfigController_getConfigValue","summary":"Retrieve value using property name","parameters":[{"name":"name","required":true,"in":"path","description":"Parameter's name","schema":{"type":"string"}}],"responses":{"200":{"description":"Assigned value for the property"},"404":{"description":"No name located"}}},"put":{"operationId":"ConfigController_setConfigValue","summary":"Modify the value based on its property name","parameters":[{"name":"name","required":true,"in":"path","description":"Name of the parameter","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Updated property value","content":{"application/json":{"schema":{"type":"string"}}}},"responses":{"404":{"description":"Key not found"}}}},"/operation/{operationID}":{"get":{"operationId":"OperationController_getOperation","summary":"Retrieve the status and log entries of the ongoing operation","parameters":[{"name":"operationID","required":true,"in":"path","schema":{"type":"number"}},{"name":"pager","required":false,"in":"path","description":"Log location to be retrieved","schema":{"type":"number"}},{"name":"count","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Operation currently underway","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationDTO"}}}},"404":{"description":"No connection located"}}}},"/operation":{"post":{"operationId":"OperationController_startOperation","summary":"Initiate a migration process on this node","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StartOperationDTO"}}}},"responses":{"200":{"description":"The operation has been scheduled for execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationResponseDTO"}}}},"404":{"description":"Unrecognized operation name"}}}},"/operation/{operationID}/wait":{"post":{"operationId":"OperationController_waitOperation","summary":"Wait until the ongoing operation finishes","parameters":[{"name":"operationID","required":true,"in":"path","schema":{"type":"number"}},{"name":"pager","required":true,"in":"query","schema":{"type":"number"}},{"name":"count","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Final status when the operation concluded","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationDTO"}}}}}}},"/gateway/config/{name}":{"get":{"operationId":"GatewayController_getProperty1","summary":"Retrieve Liberatii Gateway configuration value using property name","parameters":[{"name":"name","required":true,"in":"path","description":"Name of the parameter","schema":{"type":"string"}}],"responses":{"200":{"description":"Value of the property"},"404":{"description":"Name not found"}}}},"/gateway/config":{"get":{"operationId":"GatewayController_getProperty","summary":"Retrieve all configuration settings for the Liberatii Gateway","parameters":[],"responses":{"200":{"description":"Value of the current configuration","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GatewayConfigDTO"}}}}}},"patch":{"operationId":"GatewayController_setProperty","summary":"Update a configuration setting for the Liberatii Gateway","parameters":[],"requestBody":{"required":true,"description":"Settings to modify in the current configuration file","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GatewayConfigDTO"}}}},"responses":{"200":{"description":"The value has been merged into the current configuration"}}}},"/gateway/health":{"get":{"operationId":"GatewayController_health","summary":"Function to check system health","parameters":[],"responses":{"200":{"description":"All systems are functioning properly","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/gateway/restart":{"post":{"operationId":"GatewayController_restart","summary":"Restart Liberatii Gatway","parameters":[],"responses":{"200":{"description":"Liberatii Gateway has been restarted"}}}}},"info":{"title":"Liberatii Migration Services","description":"Liberatii Migration Services API","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"schemas":{"PoolOptionsDTO":{"type":"object","properties":{"max":{"type":"number","description":"Maximum number of connections"},"min":{"type":"number","description":"Minimum number of open connections in pool"},"idleTimeoutMillis":{"type":"number","description":"Idle timeout for each connection in milliseconds"}},"required":["max","min","idleTimeoutMillis"]},"DatabaseOptionsDTO":{"type":"object","properties":{"encrypt":{"type":"boolean","description":"Database connection is encrypted"},"trustServerCertificate":{"type":"boolean","description":"Trust database server certificate, ignore certificate errors"}},"required":["encrypt","trustServerCertificate"]},"AnyConnectionDTO":{"type":"object","properties":{"type":{"type":"string","description":"DBMS vendor.","enum":["Oracle","PostgreSQL","MSSQL","LGW"]},"user":{"type":"string","description":"Database user."},"password":{"type":"string","description":"Database user's password."},"host":{"type":"string","description":"Database server's address."},"port":{"type":"number","description":"Database server port."},"database":{"type":"string","description":"Database name."},"sid":{"type":"string","description":"Database SID"},"connectionString":{"type":"string","description":"Connection string (for Oracle)."},"pool":{"description":"MS-specific connection pool specification","allOf":[{"$ref":"#/components/schemas/PoolOptionsDTO"}]},"options":{"description":"Database specific options.","allOf":[{"$ref":"#/components/schemas/DatabaseOptionsDTO"}]},"ssl":{"type":"boolean","description":"Encryption is enabled (for PostgreSQL and LGW)."}},"required":["type","user","password","host","port","database","sid","connectionString","pool","options","ssl"]},"ConfigDTO":{"type":"object","properties":{"dataOnePass":{"type":"boolean","description":"Data is directly held in memory without any staging process during the 'data' phase."},"verbose":{"type":"number","description":"Detail level of output."},"useCopy":{"type":"boolean","description":"Opt for COPY commands over INSERT statements."},"dataIterations":{"type":"number","description":"Number of data migration iterations to perform before process exit."},"useWrapper":{"type":"boolean","description":"Access PostgreSQL through Liberatii Gateway instead of a direct connection (when using the Gateway, no direct PostgreSQL connection is needed)."},"useUnlogged":{"type":"boolean","description":"Turn off WAL prior to data loading and turn it back on afterward."},"stagingSchema":{"type":"string","description":"Transfer table data to this schema before importing to the target."},"stagingDir":{"type":"string","description":"Copy table data to this directory prior to importing to the target."},"rowsBuf":{"type":"number","description":"Divide COPY commands by this number of rows."},"lightCheck":{"type":"boolean","description":"Verify based on row count rather than checking hash values."},"dataChunkSize":{"type":"number","description":"Size in bytes for each data chunk transferred by a thread. Set to -1 to turn off chunking. This setting is disregarded when using `dataOnePass`."},"bigTablesFirst":{"type":"boolean","description":"Prioritize larger tables during the `data` stage. This approach optimizes multi-threaded processing."},"rmStagingFiles":{"type":"boolean","description":"Delete staging files once data import is complete."},"parTables":{"type":"boolean","description":"Allow table division into chunks for concurrent loading (his setting is overlooked when using `dataOnePass`)."},"hashType":{"type":"string","description":"Hashing method utilised for comparing column values."},"blobStreams":{"type":"boolean","description":"Stream BLOBs instead of fully loading them into memory. This method is slower but prevents memory overflow from large BLOBs."},"clobStreams":{"type":"boolean","description":"Stream CLOBs instead of fully loading them into memory. This method is slower but prevents memory overflow from large CLOBs."},"blobImmed":{"type":"boolean","description":"Fetch BLOBs concurrently as rows are read."},"clobImmed":{"type":"boolean","description":"Fetch CLOBs concurrently as rows are read."},"dumpCopy":{"type":"boolean","description":"Dump COPY statements for troubleshooting purposes."},"dryRun":{"type":"boolean","description":"During the `data` stage, withhold data transmission for troubleshooting."},"noBlobs":{"type":"boolean","description":"Exclude BLOBs during the data transmission phase."},"idCol":{"type":"string","description":"Column designated for segmenting tables into chunks."},"idColByTable":{"type":"object","description":"Same as `idCol` but with the ability to specify the column for each table."},"activeSqlFiles":{"description":"Similar to `idCol`, but offering the option to designate the column individually for each table.","type":"array","items":{"type":"string"}},"numTries":{"type":"number","description":"Number of tries for PostgreSQL operations."},"maxWait":{"type":"number","description":"Time gap in milliseconds before the subsequent attempt following an error."},"ignoreTrim":{"type":"boolean","description":"Remove leading and trailing spaces from string values before comparing during data verification."},"users":{"description":"The Oracle user(schemas) for migration.","type":"array","items":{"type":"string"}},"workloadsFiles":{"type":"string","description":"Location of captured workload files for replay."},"eraseOnInit":{"type":"boolean","description":"Fully recreate all objects."},"debezium":{"type":"string","description":"URL Prefix of the Debezium connector"}},"required":["dataOnePass","verbose","useCopy","dataIterations","useWrapper","useUnlogged","stagingSchema","stagingDir","rowsBuf","lightCheck","dataChunkSize","bigTablesFirst","rmStagingFiles","parTables","hashType","blobStreams","clobStreams","blobImmed","clobImmed","dumpCopy","dryRun","noBlobs","idCol","idColByTable","activeSqlFiles","numTries","maxWait","ignoreTrim","users","workloadsFiles","eraseOnInit","debezium"]},"ConfigResponseDTO":{"type":"object","properties":{"message":{"type":"string","description":"Output message."},"config":{"description":"Resulting config.","allOf":[{"$ref":"#/components/schemas/ConfigDTO"}]}},"required":["message","config"]},"MessageDTO":{"type":"object","properties":{"level":{"type":"string","description":"Severity Level of the Message.","enum":["Info","Warning","Error"]},"message":{"type":"string","description":"Actual value of the message."}},"required":["level","message"]},"OperationDTO":{"type":"object","properties":{"id":{"type":"number","description":"Current operation's id."},"title":{"type":"string","description":"Current operation's name.","enum":["init","schema","staging","data","constraints","check","sync","replay"]},"status":{"type":"string","description":"Present state that the ongoing operation is currently in.","enum":["Running","Failed","Succeeded"]},"progress":{"type":"number","description":"Percentage of the total completion."},"messages":{"description":"Messages that were previously generated and displayed as a result.","type":"array","items":{"$ref":"#/components/schemas/MessageDTO"}}},"required":["id","title","status","progress","messages"]},"StartOperationDTO":{"type":"object","properties":{"oracle":{"type":"number","description":"Oracle connection ID."},"postgres":{"type":"number","description":"PostgreSQL connection ID."},"lgw":{"type":"number","description":"Liberatii Gatway connection ID."},"ms":{"type":"number","description":"MSSQL connection ID."},"stage":{"type":"string","description":"The name of the stage to execute in this operation.","enum":["init","schema","staging","data","constraints","check","sync","replay"]},"id":{"type":"number","description":"Target operation ID."}},"required":["oracle","postgres","lgw","ms","stage","id"]},"OperationResponseDTO":{"type":"object","properties":{"message":{"type":"string","description":"Status description in plain languag."},"operation":{"description":"Description of the operation that was created.","allOf":[{"$ref":"#/components/schemas/OperationDTO"}]}},"required":["message","operation"]},"GatewayConfigDTO":{"type":"object","properties":{"infoquery_user":{"type":"string","description":"Dedicated role name for reading metadata from the PostgreSQL database"},"infoquery_password":{"type":"string","description":"Password for the `infoquery_user` role"},"translator_option_num_family_cast":{"type":"string","description":"Use numerics instead of ints/shorts","enum":["enable","disable"]},"translator_mode":{"type":"string","description":"Use TypeScript translator instead of the compiled one","enum":["script","fast","none"]},"translator_option_str_cond_cast":{"type":"string","description":"Remove TO_CHAR if applicable","enum":["enable","disable"]},"translator_severity":{"type":"number","description":"When translation engine throws an exception","minimum":0,"maximum":2},"tqc":{"type":"string","description":"Enable translator engine cache","enum":["enable","disable"]},"tqc_size":{"type":"number","description":"Number of queries cached in memory"},"tqc_ddl":{"type":"string","description":"Activate caching for DDL statements","enum":["enable","disable"]},"tqc_mem_threshold":{"type":"number","description":"Number of milliseconds, after this delay the query will be stored in cache"},"tqc_db_load":{"type":"number","description":"Load cache from the database upon startup"},"tqc_db_store":{"type":"string","description":"Store cached queries also in the database","enum":["enable","disable"]},"tqc_db_threshold":{"type":"number","description":"Number of milliseconds, after this delay the query will be stored in database"},"tqc_auto_translate":{"type":"string","description":"Activate an automated query translation (it will only used the cached items if disabled)","enum":["enable","disable"]},"tmqc":{"type":"string","description":"Activate an automated query translation (it will only used the cached items if disabled)","enum":["enable","disable"]},"tmqc_size":{"type":"number","description":"Number of queries cached in memory"}},"required":["infoquery_user","infoquery_password","translator_option_num_family_cast","translator_mode","translator_option_str_cond_cast","translator_severity","tqc","tqc_size","tqc_ddl","tqc_mem_threshold","tqc_db_load","tqc_db_store","tqc_db_threshold","tqc_auto_translate","tmqc","tmqc_size"]}}}}