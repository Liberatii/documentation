{"openapi":"3.0.0","paths":{"/connection":{"post":{"operationId":"ConnectionController_create","summary":"Establish a new connection to either a source or target","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}},"responses":{"200":{"description":"New connection has been added","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}}}},"get":{"operationId":"ConnectionController_getConnections","summary":"Fetch the currently active connections","parameters":[],"responses":{"200":{"description":"The list of connections","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}}}}}},"/connection/{connectionID}":{"get":{"operationId":"ConnectionController_getConnection","summary":"Retrieve connection parameters","parameters":[{"name":"connectionID","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Parameters of the connection","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}},"404":{"description":"No connection located"}}}},"/connection/delete":{"delete":{"operationId":"ConnectionController_deleteConnection","summary":"Remove a connection using its ID","parameters":[{"name":"connectionID","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"The connection has been deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}},"404":{"description":"No connection located"}}}},"/config":{"post":{"operationId":"ConfigController_setConfig","summary":"Update current configuration options","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfigDTO"}}}},"responses":{"200":{"description":"Resulting configuration","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfigResponseDTO"}}}}}},"get":{"operationId":"ConfigController_getConfig","summary":"Retrieve current configuration","parameters":[],"responses":{"200":{"description":"The current configuration","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfigDTO"}}}}}}},"/config/{name}":{"get":{"operationId":"ConfigController_getConfigValue","summary":"Retrieve value using property name","parameters":[{"name":"name","required":true,"in":"path","description":"Parameter's name","schema":{"type":"string"}}],"responses":{"200":{"description":"Assigned value for the property"},"404":{"description":"No name located"}}},"put":{"operationId":"ConfigController_setConfigValue","summary":"Modify the value based on its property name","parameters":[{"name":"name","required":true,"in":"path","description":"Name of the parameter","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Updated property value","content":{"application/json":{"schema":{"type":"string"}}}},"responses":{"404":{"description":"Key not found"}}}},"/operation":{"get":{"operationId":"OperationController_getOperation","summary":"Retrieve the status and log entries of the ongoing operation","parameters":[{"name":"pager","required":true,"in":"path","description":"Log location to be retrieved","schema":{"type":"number"}}],"responses":{"200":{"description":"Operation currently underway","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationDTO"}}}}}},"post":{"operationId":"OperationController_startOperation","summary":"Initiate a migration process on this node","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StartOperationDTO"}}}},"responses":{"200":{"description":"The operation has been scheduled for execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationResponseDTO"}}}},"404":{"description":"Unrecognized operation name"}}}},"/operation/wait":{"post":{"operationId":"OperationController_waitOperation","summary":"Wait until the ongoing operation finishes","parameters":[],"responses":{"200":{"description":"Final status when the operation concluded","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationDTO"}}}}}}},"/gateway/config/{name}":{"get":{"operationId":"GatewayController_getProperty1","summary":"Retrieve Liberatii Gateway configuration value using property name","parameters":[{"name":"name","required":true,"in":"path","description":"Name of the parameter","schema":{"type":"string"}}],"responses":{"200":{"description":"Value of the property"},"404":{"description":"Name not found"}}}},"/gateway/config":{"get":{"operationId":"GatewayController_getProperty","summary":"Retrieve all configuration settings for the Liberatii Gateway","parameters":[],"responses":{"200":{"description":"Value of the current configuration","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GatewayConfigDTO"}}}}}},"patch":{"operationId":"GatewayController_setProperty","summary":"Update a configuration setting for the Liberatii Gateway","parameters":[],"requestBody":{"required":true,"description":"Settings to modify in the current configuration file","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GatewayConfigDTO"}}}},"responses":{"200":{"description":"The value has been merged into the current configuration"}}}},"/gateway/health":{"get":{"operationId":"GatewayController_health","summary":"Function to check system health","parameters":[],"responses":{"200":{"description":"All systems are functioning properly","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/gateway/restart":{"post":{"operationId":"GatewayController_restart","summary":"Restart Liberatii Gatway","parameters":[],"responses":{"200":{"description":"Liberatii Gateway has been restarted"}}}}},"info":{"title":"Liberatii Migration Services","description":"Liberatii Migration Services API","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"schemas":{"AnyConnectionDTO":{"type":"object","properties":{"type":{"type":"string","title":"DBMS vendor","enum":["Oracle","PostgreSQL","MSSQL","LGW"]},"user":{"type":"string","title":"Database user"},"password":{"type":"string","title":"Database user's password"},"host":{"type":"string","title":"Database server's address"},"port":{"type":"number","title":"Database server' port"},"database":{"type":"string","title":"Database name"},"connectionString":{"type":"string","title":"Connection string (for Oracle)"},"options":{"type":"object","title":"Database specific options"},"ssl":{"type":"boolean","title":"Encryption is enabled (for PostgreSQL and LGW)"}},"required":["type","user","password","host","port","database","connectionString","options","ssl"]},"Set":{"type":"object","properties":{}},"ConfigDTO":{"type":"object","properties":{"dataOnePass":{"type":"boolean","title":"Data is directly held in memory without any staging process during the 'data' phase"},"verbose":{"type":"number","title":"Detail level of output"},"useCopy":{"type":"boolean","title":"Opt for COPY commands over INSERT statements"},"dataIterations":{"type":"number","title":"Number of data migration iterations to perform before process exit"},"useWrapper":{"type":"boolean","title":"Access PostgreSQL through Liberatii Gateway instead of a direct connection (when using the Gateway, no direct PostgreSQL connection is needed)"},"useUnlogged":{"type":"boolean","title":"Turn off WAL prior to data loading and turn it back on afterward"},"stagingSchema":{"type":"string","title":"Transfer table data to this schema before importing to the target"},"stagingDir":{"type":"string","title":"Copy table data to this directory prior to importing to the target"},"rowsBuf":{"type":"number","title":"Divide COPY commands by this number of rows"},"lightCheck":{"type":"boolean","title":"Verify based on row count rather than checking hash values"},"dataChunkSize":{"type":"number","title":"Size in bytes for each data chunk transferred by a thread.","description":"Set to -1 to turn off chunking. This setting is disregarded when using `dataOnePass`."},"bigTablesFirst":{"type":"boolean","title":"Prioritize larger tables during the `data` stage","description":"This approach optimizes multi-threaded processing"},"rmStagingFiles":{"type":"boolean","title":"Delete staging files once data import is complete"},"parTables":{"type":"boolean","title":"Allow table division into chunks for concurrent loading (his setting is overlooked when using `dataOnePass`)"},"hashType":{"type":"string","title":"Hashing method utilised for comparing column values"},"blobStreams":{"type":"boolean","title":"Stream BLOBs instead of fully loading them into memory","description":"This method is slower but prevents memory overflow from large BLOBs."},"clobStreams":{"type":"boolean","title":"Stream CLOBs instead of fully loading them into memory","description":"This method is slower but prevents memory overflow from large CLOBs."},"blobImmed":{"type":"boolean","title":"Fetch BLOBs concurrently as rows are read"},"clobImmed":{"type":"boolean","title":"Fetch CLOBs concurrently as rows are read"},"dumpCopy":{"type":"boolean","title":"Dump COPY statements for troubleshooting purposes"},"dryRun":{"type":"boolean","title":"During the `data` stage, withhold data transmission for troubleshooting"},"noBlobs":{"type":"boolean","title":"Exclude BLOBs during the data transmission phase"},"idCol":{"type":"string","title":"Column designated for segmenting tables into chunks"},"idColByTable":{"type":"object","title":"Same as `idCol` but with the ability to specify the column for each table"},"activeSqlFiles":{"title":"Similar to `idCol`, but offering the option to designate the column individually for each table","type":"array","items":{"type":"string"}},"numTries":{"type":"number","title":"Number of tries for PostgreSQL operations"},"maxWait":{"type":"number","title":"Time gap in milliseconds before the subsequent attempt following an error"},"ignoreTrim":{"type":"boolean","title":"Remove leading and trailing spaces from string values before comparing during data verification"},"users":{"title":"The Oracle user(schemas) for migration","type":"array","items":{"type":"string"}},"stages":{"title":"Stages to execute in a single run","allOf":[{"$ref":"#/components/schemas/Set"}]},"workloadsFiles":{"type":"string","title":"Location of captured workload files for replay"},"eraseOnInit":{"type":"boolean","title":"Fully recreate all objects"}},"required":["dataOnePass","verbose","useCopy","dataIterations","useWrapper","useUnlogged","stagingSchema","stagingDir","rowsBuf","lightCheck","dataChunkSize","bigTablesFirst","rmStagingFiles","parTables","hashType","blobStreams","clobStreams","blobImmed","clobImmed","dumpCopy","dryRun","noBlobs","idCol","idColByTable","activeSqlFiles","numTries","maxWait","ignoreTrim","users","stages","workloadsFiles","eraseOnInit"]},"ConfigResponseDTO":{"type":"object","properties":{"message":{"type":"string","title":"Output message"},"config":{"title":"Resulting config","allOf":[{"$ref":"#/components/schemas/ConfigDTO"}]}},"required":["message","config"]},"MessageDTO":{"type":"object","properties":{"level":{"type":"string","title":"Severity Level of the Message","enum":["Info","Warning","Error"]},"message":{"type":"string","title":"Actual value of the message"}},"required":["level","message"]},"OperationDTO":{"type":"object","properties":{"title":{"type":"string","title":"Current operation's name","enum":["init","schema","staging","data","constraints","check","sync","replay"]},"status":{"type":"string","title":"Present state that the ongoing operation is currently in","enum":["Running","Failed","Succeeded"]},"progress":{"type":"number","title":"Percentage of the total completion."},"messages":{"title":"Messages that were previously generated and displayed as a result","type":"array","items":{"$ref":"#/components/schemas/MessageDTO"}}},"required":["title","status","progress","messages"]},"StartOperationDTO":{"type":"object","properties":{"oracle":{"type":"number","title":"Oracle connection ID"},"postgres":{"type":"number","title":"PostgreSQL connection ID"},"lgw":{"type":"number","title":"Liberatii Gatway connection ID"},"ms":{"type":"number","title":"MSSQL connection ID"},"stage":{"type":"string","title":"The name of the stage to execute in this operation","enum":["init","schema","staging","data","constraints","check","sync","replay"]}},"required":["oracle","postgres","lgw","ms","stage"]},"OperationResponseDTO":{"type":"object","properties":{"message":{"type":"string","title":"Status description in plain languag"},"operation":{"title":"Description of the operation that was created","allOf":[{"$ref":"#/components/schemas/OperationDTO"}]}},"required":["message","operation"]},"GatewayConfigDTO":{"type":"object","properties":{"infoquery_user":{"type":"string","description":"Dedicated role name for reading metadata from the PostgreSQL database"},"infoquery_password":{"type":"string","description":"Password for the `infoquery_user` role"},"translator_option_num_family_cast":{"type":"string","description":"Use numerics instead of ints/shorts","enum":["enable","disable"]},"translator_mode":{"type":"string","description":"Use TypeScript translator instead of the compiled one","enum":["script","fast","none"]},"translator_option_str_cond_cast":{"type":"string","description":"Remove TO_CHAR if applicable","enum":["enable","disable"]},"translator_severity":{"type":"number","description":"When translation engine throws an exception","minimum":0,"maximum":2},"tqc":{"type":"string","description":"Enable translator engine cache","enum":["enable","disable"]},"tqc_size":{"type":"number","description":"Number of queries cached in memory"},"tqc_ddl":{"type":"string","description":"Activate caching for DDL statements","enum":["enable","disable"]},"tqc_mem_threshold":{"type":"number","description":"Number of milliseconds, after this delay the query will be stored in cache"},"tqc_db_load":{"type":"number","description":"Load cache from the database upon startup"},"tqc_db_store":{"type":"string","description":"Store cached queries also in the database","enum":["enable","disable"]},"tqc_db_threshold":{"type":"number","description":"Number of milliseconds, after this delay the query will be stored in database"},"tqc_auto_translate":{"type":"string","description":"Activate an automated query translation (it will only used the cached items if disabled)","enum":["enable","disable"]},"tmqc":{"type":"string","description":"Activate an automated query translation (it will only used the cached items if disabled)","enum":["enable","disable"]},"tmqc_size":{"type":"number","description":"Number of queries cached in memory"}},"required":["infoquery_user","infoquery_password","translator_option_num_family_cast","translator_mode","translator_option_str_cond_cast","translator_severity","tqc","tqc_size","tqc_ddl","tqc_mem_threshold","tqc_db_load","tqc_db_store","tqc_db_threshold","tqc_auto_translate","tmqc","tmqc_size"]}}}}