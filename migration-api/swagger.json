{"openapi":"3.0.0","paths":{"/connection":{"post":{"operationId":"ConnectionController_create","summary":"Establish a new connection to either a source or target","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}},"responses":{"200":{"description":"New connection has been added","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}}}},"get":{"operationId":"ConnectionController_getConnections","summary":"Retrieve active connections currently in use","parameters":[],"responses":{"200":{"description":"The list of connections","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}}}}}},"/connection/{connectionID}":{"get":{"operationId":"ConnectionController_getConnection","summary":"Retrieve connection parameters","parameters":[{"name":"connectionID","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"The connection's paramters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}},"404":{"description":"Connection not found"}}}},"/connection/delete":{"delete":{"operationId":"ConnectionController_deleteConnection","summary":"Delete a connection by id","parameters":[{"name":"connectionID","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"The connection has been deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnyConnectionDTO"}}}}}}},"/config":{"post":{"operationId":"ConfigController_setConfig","summary":"Update current configuration options","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfigDTO"}}}},"responses":{"200":{"description":"Resulting configuration","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfigResponseDTO"}}}}}},"get":{"operationId":"ConfigController_getConfig","summary":"Retrieve current configuration","parameters":[],"responses":{"200":{"description":"The current configuration","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfigDTO"}}}}}}},"/config/{name}":{"get":{"operationId":"ConfigController_getConfigValue","summary":"Retrieve value using property name","parameters":[{"name":"name","required":true,"in":"path","description":"Name of the parameter","schema":{"type":"string"}}],"responses":{"200":{"description":"Value of the property"},"404":{"description":"Name not found"}}}},"/config/{key}":{"put":{"operationId":"ConfigController_setConfigValue","summary":"Update value using property name","parameters":[{"name":"key","required":true,"in":"path","schema":{"type":"string"}},{"name":"name","required":true,"in":"path","description":"Name of the parameter","schema":{}}],"requestBody":{"required":true,"description":"Value of the property","content":{"application/json":{"schema":{"type":"string"}}}},"responses":{"404":{"description":"Key not found"}}}},"/operation":{"get":{"operationId":"OperationController_getOperation","summary":"Get the currently performing operation status and log records","parameters":[{"name":"pager","required":true,"in":"path","description":"Position in the log to be returned","schema":{"type":"number"}}],"responses":{"200":{"description":"Operation in progress","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationDTO"}}}}}},"post":{"operationId":"OperationController_startOperation","summary":"Start a migration operation on this node","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StartOperationDTO"}}}},"responses":{"200":{"description":"The operation is scheduled for execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationResponseDTO"}}}},"404":{"description":"Unknown operation's name"}}}},"/operation/wait":{"post":{"operationId":"OperationController_waitOperation","summary":"Wait for the current operation to complete","parameters":[],"responses":{"200":{"description":"The status of the operation reached when it ended","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationDTO"}}}}}}},"/gateway/config/{name}":{"get":{"operationId":"GatewayController_getProperty1","summary":"Retrieve Liberatii Gateway configuration value using property name","parameters":[{"name":"name","required":true,"in":"path","description":"Name of the parameter","schema":{"type":"string"}}],"responses":{"200":{"description":"Value of the property"},"404":{"description":"Name not found"}}}},"/gateway/config":{"get":{"operationId":"GatewayController_getProperty","summary":"Get all LGW configuration parameters in JSON","parameters":[],"responses":{"200":{"description":"The current config's value","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GatewayConfigDTO"}}}}}},"patch":{"operationId":"GatewayController_setProperty","summary":"Set Liberatii Gateway configuration parameter, defined as a JSON object","parameters":[],"requestBody":{"required":true,"description":"Value of the property","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GatewayConfigDTO"}}}},"responses":{"200":{"description":"The value has been merged into the current configuration"}}}},"/gateway/health":{"get":{"operationId":"GatewayController_health","summary":"Health check function","parameters":[],"responses":{"200":{"description":"Everything is OK","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/gateway/restart":{"post":{"operationId":"GatewayController_restart","summary":"Restart Liberatii Gatway","parameters":[],"responses":{"200":{"description":"Liberatii Gateway has been restarted"}}}}},"info":{"title":"Liberatii Migration Services","description":"Liberatii Migration Services API","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"schemas":{"AnyConnectionDTO":{"type":"object","properties":{"type":{"type":"string","title":"DBMS vendor","enum":["Oracle","PostgreSQL","MSSQL","LGW"]},"user":{"type":"string","title":"Database user"},"password":{"type":"string","title":"Database user's password"},"host":{"type":"string","title":"Database server's address"},"port":{"type":"number","title":"Database server' port"},"database":{"type":"string","title":"Database name"},"connectionString":{"type":"string","title":"Connection string (for Oracle)"},"options":{"type":"object","title":"Database specific options"},"ssl":{"type":"boolean","title":"Encryption is enabled (for PostgreSQL and LGW)"}},"required":["type","user","password","host","port","database","connectionString","options","ssl"]},"Set":{"type":"object","properties":{}},"ConfigDTO":{"type":"object","properties":{"dataOnePass":{"type":"boolean","title":"No staging, all the data is in memory (during `data` stage)"},"verbose":{"type":"number","title":"Verbosity level"},"useCopy":{"type":"boolean","title":"Use COPY statements instead of INSERTs"},"dataIterations":{"type":"number","title":"Number of data migration iterations to perform before process exit"},"useWrapper":{"type":"boolean","title":"Use Liberatii Gateway to access PostgreSQL, not accessing it directly, in this case the PostgreSQL connection isn't required"},"useUnlogged":{"type":"boolean","title":"Disable WAL for before data loading and enable after"},"stagingSchema":{"type":"string","title":"Move tables data into this schema before uploading into the target"},"stagingDir":{"type":"string","title":"Move tables data into this folder before uploading into the target"},"rowsBuf":{"type":"number","title":"Split COPY statements into this amount of rows"},"lightCheck":{"type":"boolean","title":"Don't check hash values, but only number of rows "},"dataChunkSize":{"type":"number","title":"Size of a single chunk of data to transfer per thread (in bytes), set it to -1 to disable the chunking, ignored with `dataOnePass`"},"bigTablesFirst":{"type":"boolean","title":"Start from biggest tables on `data` stage (this is more efffective for running in several threads)"},"rmStagingFiles":{"type":"boolean","title":"Remove staging files after the data is loaded"},"parTables":{"type":"boolean","title":"Enable spliting tables in chunks for parallel loading, ignored with `dataOnePass`  "},"hashType":{"type":"string","title":"Hash algorithm used to compare resulting column values"},"blobStreams":{"type":"boolean","title":"Read BLOBs as stream without reading them whole into a memory (it's slower but it doesn't overflow memory by huge BLOBs)"},"clobStreams":{"type":"boolean","title":"Read BLOBs as stream without reading them whole into a memory (it's slower but it doesn't overflow memory by huge CLOBs)"},"blobImmed":{"type":"boolean","title":"Read BLOBs immediately on reading rows"},"clobImmed":{"type":"boolean","title":"Read CLOBs immediately on reading rows"},"dumpCopy":{"type":"boolean","title":"Dump COPY statements for debugging"},"dryRun":{"type":"boolean","title":"At the data stage don't actually send the data for debugging purposes"},"noBlobs":{"type":"boolean","title":"Don't send blobs for the data stage"},"idCol":{"type":"string","title":"Which column is used for splitting tables in chunks"},"idColByTable":{"type":"object","title":"Same as `idCol` but with the ability to specify the column for each table"},"activeSqlFiles":{"title":"Globs with for SQL files to check in `checksql` and `chechls` stages","type":"array","items":{"type":"string"}},"numTries":{"type":"number","title":"Number of tries for PostgreSQL operations"},"maxWait":{"type":"number","title":"Delay in milliseconds before the next try after a error"},"ignoreTrim":{"type":"boolean","title":"Trim string values before comparision during data verification"},"users":{"title":"The Oracle users(schemas) to migrate ","type":"array","items":{"type":"string"}},"stages":{"title":"Stages to run in a single execution ","allOf":[{"$ref":"#/components/schemas/Set"}]},"workloadsFiles":{"type":"string","title":"Captured workload files location for replaying"},"eraseOnInit":{"type":"boolean","title":"Re-create everything"}},"required":["dataOnePass","verbose","useCopy","dataIterations","useWrapper","useUnlogged","stagingSchema","stagingDir","rowsBuf","lightCheck","dataChunkSize","bigTablesFirst","rmStagingFiles","parTables","hashType","blobStreams","clobStreams","blobImmed","clobImmed","dumpCopy","dryRun","noBlobs","idCol","idColByTable","activeSqlFiles","numTries","maxWait","ignoreTrim","users","stages","workloadsFiles","eraseOnInit"]},"ConfigResponseDTO":{"type":"object","properties":{"message":{"type":"string","title":"Output message"},"config":{"title":"Resulting config","allOf":[{"$ref":"#/components/schemas/ConfigDTO"}]}},"required":["message","config"]},"MessageDTO":{"type":"object","properties":{"level":{"type":"string","title":"Severity Level of the Message","enum":["Info","Warning","Error"]},"message":{"type":"string","title":"Actual value of the message"}},"required":["level","message"]},"OperationDTO":{"type":"object","properties":{"title":{"type":"string","title":"Current operation's name","enum":["init","schema","staging","data","constraints","check","sync","replay"]},"status":{"type":"string","title":"Present state that the ongoing operation is currently in","enum":["Running","Failed","Succeeded"]},"progress":{"type":"number","title":"Percentage of the total completion."},"messages":{"title":"Messages that were previously generated and displayed as a result","type":"array","items":{"$ref":"#/components/schemas/MessageDTO"}}},"required":["title","status","progress","messages"]},"StartOperationDTO":{"type":"object","properties":{"oracle":{"type":"number","title":"Oracle connection ID"},"postgres":{"type":"number","title":"PostgreSQL connection ID"},"lgw":{"type":"number","title":"Liberatii Gatway connection ID"},"ms":{"type":"number","title":"MSSQL connection ID"},"stage":{"type":"string","title":"The name of the stage to execute in this operation","enum":["init","schema","staging","data","constraints","check","sync","replay"]}},"required":["oracle","postgres","lgw","ms","stage"]},"OperationResponseDTO":{"type":"object","properties":{"message":{"type":"string","title":"Status description in plain languag"},"operation":{"title":"Description of the operation that was created","allOf":[{"$ref":"#/components/schemas/OperationDTO"}]}},"required":["message","operation"]},"GatewayConfigDTO":{"type":"object","properties":{"infoquery_user":{"type":"string","description":"Dedicated role name for reading metadata from the PostgreSQL database"},"infoquery_password":{"type":"string","description":"Password for the `infoquery_user` role"},"translator_option_num_family_cast":{"type":"string","description":"Use numerics instead of ints/shorts","enum":["enable","disable"]},"translator_mode":{"type":"string","description":"Use TypeScript translator instead of the compiled one","enum":["script","fast","none"]},"translator_option_str_cond_cast":{"type":"string","description":"Remove TO_CHAR if applicable","enum":["enable","disable"]},"translator_severity":{"type":"number","description":"When translation engine throws an exception","minimum":0,"maximum":2},"tqc":{"type":"string","description":"Enable translator engine cache","enum":["enable","disable"]},"tqc_size":{"type":"number","description":"Number of queries cached in memory"},"tqc_ddl":{"type":"string","description":"Activate caching for DDL statements","enum":["enable","disable"]},"tqc_mem_threshold":{"type":"number","description":"Number of milliseconds, after this delay the query will be stored in cache"},"tqc_db_load":{"type":"number","description":"Load cache from the database upon startup"},"tqc_db_store":{"type":"string","description":"Store cached queries also in the database","enum":["enable","disable"]},"tqc_db_threshold":{"type":"number","description":"Number of milliseconds, after this delay the query will be stored in database"},"tqc_auto_translate":{"type":"string","description":"Activate an automated query translation (it will only used the cached items if disabled)","enum":["enable","disable"]},"tmqc":{"type":"string","description":"Activate an automated query translation (it will only used the cached items if disabled)","enum":["enable","disable"]},"tmqc_size":{"type":"number","description":"Number of queries cached in memory"}},"required":["infoquery_user","infoquery_password","translator_option_num_family_cast","translator_mode","translator_option_str_cond_cast","translator_severity","tqc","tqc_size","tqc_ddl","tqc_mem_threshold","tqc_db_load","tqc_db_store","tqc_db_threshold","tqc_auto_translate","tmqc","tmqc_size"]}}}}